<mat-toolbar>
  <mat-toolbar-row>
    <app-breadcrumb [path]="(datasetCom | async).path"
                    [children]="(datasetCom | async).children"
                    (change)="onChange($event)"
    ></app-breadcrumb>
    <div class="fill"></div>
    <app-sibling-selector [labels]="(datasetCom | async).siblings" [currentLabel]="(datasetCom | async).label"
                          (change)="changeToSibling($event)"
    ></app-sibling-selector>
    <div class="fill"></div>
    <mat-form-field style="width: 4em">
      <mat-select [(ngModel)]="viewSelect" (selectionChange)="viewSelectionChanged($event.value)">
        <mat-option [value]="'ocr'">OCR</mat-option>
        <mat-option [value]="'typo'">Typo</mat-option>
      </mat-select>
    </mat-form-field>
    <div class="fill"></div>
    <mat-form-field style="width: 6em">
      <mat-select [(ngModel)]="selectedFont">
        <mat-option [value]="font" *ngFor="let font of fonts">{{ font }}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field style="width: 2em">
      <mat-select [(ngModel)]="selectedFontSize">
        <mat-option [value]="font" *ngFor="let font of fontSizes">{{ font }}</mat-option>
      </mat-select>
    </mat-form-field>
  </mat-toolbar-row>
</mat-toolbar>
<mat-sidenav-container class="container" autosize>
  <mat-sidenav position="end" [opened]="true" mode="side" fixedInViewport [fixedTopGap]="128">
    <app-virtual-keyboard #virtualKeyboard [upload]="true"></app-virtual-keyboard>
  </mat-sidenav>
  <mat-sidenav-content [style.font-size]="selectedFontSize + 'px'">
    <mat-toolbar>
      <mat-toolbar-row>
        <mat-slide-toggle [(ngModel)]="showTitle">Show title</mat-slide-toggle>
        <mat-divider [vertical]="true"></mat-divider>
        <mat-slide-toggle [(ngModel)]="showPrediction">Show prediction</mat-slide-toggle>
        <div class="fill"></div>
        <mat-form-field>
          <mat-icon>search</mat-icon>
          <input matInput autocomplete="off" [(ngModel)]="filter">
        </mat-form-field>
      </mat-toolbar-row>
    </mat-toolbar>
    <ng-container *ngFor="let d of (datasetCom | async).files">
      <mat-card *ngIf="(filter && filter.length > 0) ? d.indexOf(filter) >= 0 : true" class="entry">
        <mat-card-subtitle *ngIf="showTitle">{{d}}</mat-card-subtitle>
        <app-ocr-editor *ngIf="viewSelect === 'ocr'" [datasetCom]="datasetCom | async" [file]="d" [font]="selectedFont" [showPrediction]="showPrediction"></app-ocr-editor>
        <app-simple-typography-editor *ngIf="viewSelect === 'typo'" [datasetCom]="datasetCom | async" [file]="d" [font]="selectedFont" [separators]="[' ', '-']" [showPrediction]="showPrediction"></app-simple-typography-editor>
      </mat-card>
    </ng-container>
  </mat-sidenav-content>
</mat-sidenav-container>

